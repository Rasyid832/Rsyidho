<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Kalkulator Gradien & Bidang Singgung</title>

  <!-- math.js -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjs/11.8.0/math.min.js"></script>

  <style>
    * { box-sizing: border-box; font-family: 'Poppins', sans-serif; }
    body {
      margin: 0; min-height: 100vh;
      background: linear-gradient(135deg, #0f172a, #1e1b4b);
      display: flex; justify-content: center; align-items: center;
      color: #fff;
    }

    .card {
      background: rgba(255, 255, 255, 0.08);
      padding: 35px; border-radius: 20px;
      width: 400px; box-shadow: 0 8px 40px rgba(0,0,0,0.4);
      backdrop-filter: blur(12px);
      animation: fadeIn 0.8s ease-in-out;
      text-align: center;
    }

    h2 { color: #60a5fa; margin-bottom: 20px; }
    input {
      width: 100%; padding: 12px; margin: 8px 0;
      border: none; border-radius: 10px;
      background: rgba(255,255,255,0.15);
      color: #fff; font-size: 1em; outline: none;
    }
    button {
      width: 100%; padding: 12px; margin-top: 12px;
      border: none; border-radius: 10px;
      background: linear-gradient(90deg, #3b82f6, #60a5fa);
      color: #fff; font-weight: bold; cursor: pointer;
      transition: 0.2s;
    }
    button:hover { transform: translateY(-2px); }

    #hasil {
      margin-top: 15px; text-align: left;
      background: rgba(255,255,255,0.12);
      padding: 15px; border-radius: 10px;
      font-size: 0.95em; color: #86efac; white-space: pre-line;
    }

    @keyframes fadeIn {
      from {opacity:0; transform:translateY(-10px);}
      to {opacity:1; transform:translateY(0);}
    }

    .logo {
      display: block;
      width: 90px;
      margin: 0 auto 10px auto;
    }
  </style>
</head>

<body>

  <!-- LANGSUNG KALKULATOR -->
  <div class="card">
    <img 
      src="https://th.bing.com/th/id/R.7545b55b9d17b1070e2c884ffa6858fd?rik=3D80%2fEg6i9TK2A&riu=http%3a%2f%2f1.bp.blogspot.com%2f-P8KJ9GPI9ds%2fT9QrVuX-ycI%2fAAAAAAAAK3g%2fdW9fIbMoO14%2fs1600%2flogo%2bunsri.png&ehk=9XoxwvoaYfdUgOg7B0UHZJ0FrOEQIEK%2fiOrPBfmqUgE%3d&risl=&pid=ImgRaw&r=0"
      class="logo"
      alt="Logo UNSRI"
    >

    <h2>üßÆ Gradien & Bidang Singgung</h2>

    <input id="fx" placeholder="Masukkan fungsi, contoh: x*y + z^2">
    <input id="x" type="number" placeholder="Nilai x">
    <input id="y" type="number" placeholder="Nilai y">
    <input id="z" type="number" placeholder="Nilai z">

    <button onclick="hitung()">Hitung</button>

    <pre id="hasil"></pre>
  </div>

  <script>
    function evalFx(fx, x, y, z) {
      return math.evaluate(fx, { x, y, z });
    }

    function hitung() {
      const fx = document.getElementById("fx").value;
      const x = parseFloat(document.getElementById("x").value);
      const y = parseFloat(document.getElementById("y").value);
      const z = parseFloat(document.getElementById("z").value);
      const hasilDiv = document.getElementById("hasil");

      const h = 0.0001;

      try {
        const dfdx = (evalFx(fx, x+h, y, z) - evalFx(fx, x-h, y, z)) / (2*h);
        const dfdy = (evalFx(fx, x, y+h, z) - evalFx(fx, x, y-h, z)) / (2*h);
        const dfdz = (evalFx(fx, x, y, z+h) - evalFx(fx, x, y, z-h)) / (2*h);

        const fxyz = evalFx(fx, x, y, z);

        const bidang =
        `${dfdx.toFixed(4)}(x - ${x}) + ` +
        `${dfdy.toFixed(4)}(y - ${y}) + ` +
        `${dfdz.toFixed(4)}(z - ${z}) = 0`;

        hasilDiv.style.color = "#86efac";
        hasilDiv.innerText =
          `f(x,y,z) = ${fxyz.toFixed(4)}\n` +
          `‚àÇf/‚àÇx = ${dfdx.toFixed(4)}\n` +
          `‚àÇf/‚àÇy = ${dfdy.toFixed(4)}\n` +
          `‚àÇf/‚àÇz = ${dfdz.toFixed(4)}\n\n` +
          `Bidang Singgung:\n${bidang}`;

      } catch (e) {
        hasilDiv.style.color = "#f87171";
        hasilDiv.innerText = "‚ö†Ô∏è Error: " + e.message;
      }
    }
  </script>

</body>
</html>